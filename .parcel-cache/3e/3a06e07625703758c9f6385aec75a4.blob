"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.peer = exports.game = void 0;

var _peerjs = _interopRequireDefault(require("peerjs"));

var _phaser = _interopRequireDefault(require("phaser"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const {
  constructor: {
    name
  },
  location: {
    pathname
  }
} = globalThis;
const peer = new _peerjs.default();
exports.peer = peer;

class Scene extends _phaser.default.Scene {
  constructor() {
    super("@wilsjs/phaser");
  }

  preload() {// TODO
  }

  create() {// TODO
  }

}

const game = new _phaser.default.Game({
  type: _phaser.default.AUTO,
  backgroundColor: "#125555",
  width: 800,
  height: 600,
  scene: Scene
});
exports.game = game;

function log(error) {
  const {
    stack
  } = new Error();
  const a = stack?.split("\n") || [];
  const s = a[1];
  const message = {
    globalThis: name,
    location: pathname,
    function: String(/at (.+) /.exec(s)?.pop())
  };
  error ? console.error({ ...message,
    error
  }) : console.info(message);
}

function onWindowLoad() {
  log();
}

globalThis.addEventListener("load", onWindowLoad);